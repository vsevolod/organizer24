$('#calendar').fullCalendar({
  header: {
    left: 'prev,next today',
    center: 'title',
    right: ''
  },
  firstDay: 1,
  aspectRatio: 1.5,
  defaultView: 'agendaWeek',
  allDaySlot: false,
  allDayDefault: false,
  minTime: start_calendar_options.minTime*1.0/(60*60),
  maxTime: start_calendar_options.maxTime*1.0/(60*60),
  slotMinutes: start_calendar_options.slotMinutes,
  monthNames: <%= I18n.t('date.standalone_month_names').compact %>,
  dayNames: <%= I18n.t('date.standalone_day_names').compact %>,

  axisFormat: 'HH:mm',
  timeFormat: {
    agenda: 'H:mm{ - H:mm}',
    '': 'H(:mm)'
  },
  columnFormat: {
    week: "dd.MM.yyyy '<br/>' dddd",
  },
  titleFormat: {
    week: "MMMM d[ yyyy]{ '&#8212;'[ MMMM] d yyyy"
  },
  buttonText: {
    today: 'Сегодня'
  },
  eventSources: [
    {
      url: '/organizations/'+start_calendar_options.organization_id+'/working_hours/by_week',
      backgroundColor: '#ccc',
      borderColor: '#ccc'
    }
  ],
  selectable: true,
  selectHelper: true,
  editable: false,
  droppable: true,
  drop: ((date, allDay) ->
    originalEventObject = $(this).data('eventObject')
    copiedEventObject = $.extend({
      editable: false,
      disableDragging: true,
      disableResizing: true
    }, originalEventObject)
    copiedEventObject.start = date
    copiedEventObject.end = date.valueOf()/1000 + originalEventObject.duration*60
    copiedEventObject.allDay = allDay
    $('#calendar').fullCalendar('renderEvent', copiedEventObject, true)
    #$(this).remove()
  ),
  eventAfterRender: (event, element, view) ->
    console.log( event )
    console.log( element )
    console.log( view )
})
